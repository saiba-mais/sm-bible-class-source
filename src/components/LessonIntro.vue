<template>
  <div class="lesson-intro">
    <h1>{{ lesson.intro.title }}</h1>
    <p>{{ lesson.intro.description }}</p>
    <ul class="lesson-info">
      <li>
        <div class="lesson-info-title">
          <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 25 25"><g fill="#71456D" fill-rule="evenodd"><path d="M12.49375,0 C5.5875,0 0,5.59375 0,12.5 C0,19.40625 5.5875,25 12.49375,25 C19.4,25 25,19.40625 25,12.5 C25,5.59375 19.4,0 12.49375,0 Z M12.5,22.5 C6.975,22.5 2.5,18.025 2.5,12.5 C2.5,6.975 6.975,2.5 12.5,2.5 C18.025,2.5 22.5,6.975 22.5,12.5 C22.5,18.025 18.025,22.5 12.5,22.5 Z"/><path d="M12.8162019,14.6605572 C12.54371,14.6604482 12.2901386,14.5206291 12.1438153,14.2898037 L8.94113209,9.22007519 C8.78857094,8.97885871 8.77575478,8.67423766 8.90751134,8.42095984 C9.03926789,8.16768202 9.29558019,8.00422637 9.57989789,7.99216504 C9.86421558,7.98010371 10.133344,8.12126911 10.2859052,8.3624856 L12.0199547,11.1081937 L12.0199547,5.84894263 C12.0199547,5.40736429 12.3764467,5.04939432 12.8162019,5.04939432 C13.2559571,5.04939432 13.6124491,5.40736429 13.6124491,5.84894263 L13.6124491,13.8610089 C13.6124491,14.3025873 13.2559571,14.6605572 12.8162019,14.6605572 Z M23.545858,12.9220618 L22.1656962,12.9220618 C21.725941,12.9220618 21.369449,12.5640918 21.369449,12.1225135 C21.369449,11.6809351 21.725941,11.3229652 22.1656962,11.3229652 L23.545858,11.3229652 C23.9856132,11.3229652 24.3421053,11.6809351 24.3421053,12.1225135 C24.3421053,12.5640918 23.9856132,12.9220618 23.545858,12.9220618 Z M2.8343038,12.9220618 L1.45414195,12.9220618 C1.01438676,12.9220618 0.657894737,12.5640918 0.657894737,12.1225135 C0.657894737,11.6809351 1.01438676,11.3229652 1.45414195,11.3229652 L2.8343038,11.3229652 C3.274059,11.3229652 3.63055102,11.6809351 3.63055102,12.1225135 C3.63055102,12.5640918 3.274059,12.9220618 2.8343038,12.9220618 Z M12.7513534,24.3409207 C12.3115982,24.3409207 11.9551061,23.9829508 11.9551061,23.5413724 L11.9551061,22.1602268 C11.9551062,21.7186484 12.3115982,21.3606785 12.7513534,21.3606785 C13.1911085,21.3606785 13.5476006,21.7186484 13.5476006,22.1602268 L13.5476006,23.5437415 C13.5469509,23.9843951 13.1913673,24.3414529 12.752533,24.3421053 L12.7513534,24.3409207 Z M12.7513534,3.64169053 C12.3120584,3.64169102 11.955757,3.28444242 11.9551061,2.84332674 L11.9551061,1.45744301 C11.9551062,1.01586469 12.3115982,0.657894737 12.7513534,0.657894737 C13.1911085,0.657894737 13.5476006,1.01586469 13.5476006,1.45744301 L13.5476006,2.84332674 C13.5476006,3.28490508 13.1911086,3.64287505 12.7513534,3.64287505 L12.7513534,3.64169053 Z"/></g></svg>
          <span>{{ $t('introTime') }}</span>
        </div>
        <div>{{ lesson.intro.time }}</div>
      </li>
      <li>
        <div class="lesson-info-title">
          <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 25 25"><path fill="#71456D" fill-rule="evenodd" d="M12.5,25 C5.607,25 0,19.393 0,12.5 C0,5.607 5.607,0 12.5,0 C19.393,0 25,5.607 25,12.5 C25,19.393 19.393,25 12.5,25 Z M12.5,2.128 C6.78,2.128 2.128,6.78 2.128,12.5 C2.128,18.22 6.781,22.872 12.5,22.872 C18.22,22.872 22.872,18.219 22.872,12.5 C22.872,6.78 18.219,2.128 12.5,2.128 Z M11.968,17.164 C11.045,17.164 10.176,16.804 9.523,16.151 C8.87327526,15.5042747 8.5089279,14.6247287 8.511,13.708 C8.511,12.784 8.871,11.916 9.524,11.263 C10.148,10.64 12.388,9.425 16.184,7.655 C16.8146037,7.36950249 17.5591902,7.58697442 17.937,8.167 C18.191,8.567 18.223,9.062 18.022,9.493 C16.254,13.286 15.04,15.527 14.415,16.153 C13.7677864,16.803218 12.8874214,17.1676063 11.97,17.165 L11.968,17.164 Z M15.196,10.479 C12.358,11.859 11.236,12.556 11.028,12.766 C10.7773747,13.0145999 10.6364033,13.3529916 10.6364033,13.706 C10.6364033,14.0590084 10.7773747,14.3974001 11.028,14.646 C11.53,15.149 12.406,15.149 12.908,14.646 C13.183,14.371 13.974,12.99 15.196,10.478 L15.196,10.479 Z"/></svg>
          <span>{{ $t('introLevel') }}</span>
        </div>
        <div>{{ lesson.intro.level }}</div>
      </li>
      <li>
        <div class="lesson-info-title">
          <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 25 25"><path fill="#71456D" fill-rule="evenodd" d="M13.5,2.128 C7.78,2.128 3.128,6.78 3.128,12.5 C3.128,18.22 7.78,22.872 13.5,22.872 C19.22,22.872 23.872,18.219 23.872,12.5 C23.872,6.78 19.219,2.128 13.5,2.128 Z M13.5,25 C6.607,25 1,19.393 1,12.5 C1,5.607 6.607,0 13.5,0 C20.393,0 26,5.607 26,12.5 C26,19.393 20.393,25 13.5,25 Z M15.88,12.302 C16.781306,11.5813208 17.3048232,10.4890031 17.302,9.335 C17.302,7.235 15.56,5.5 13.452,5.5 C11.344,5.5 9.602,7.235 9.602,9.335 C9.602,10.521 10.152,11.617 11.024,12.302 C8.90809842,13.2353631 7.54228086,15.3293814 7.541,17.642 C7.541,18.008 7.864,18.328 8.231,18.328 L18.631,18.328 C18.998,18.328 19.319,18.008 19.319,17.643 C19.3171933,15.3437357 17.9740476,13.2569164 15.882,12.303 L15.88,12.302 Z M11.54,9.536 C11.53866,9.02948529 11.7396221,8.54340263 12.0982524,8.1857111 C12.4568828,7.82801958 12.9434905,7.62833235 13.45,7.631 C13.9572028,7.62779307 14.4446328,7.82751746 14.8037558,8.18570132 C15.1628788,8.54388518 15.3638788,9.03079051 15.362,9.538 C15.363073,10.0443416 15.1619931,10.5301664 14.803392,10.8876411 C14.4447908,11.2451158 13.9583357,11.4446661 13.452,11.442 C12.4016171,11.4365944 11.5499107,10.5893402 11.539,9.539 L11.54,9.536 Z M13.676,13.732 C15.356,13.732 16.76,14.96 17,16.565 L10.352,16.565 C10.592,14.96 11.997,13.732 13.676,13.732 Z" transform="translate(-1)"/></svg>
          <span>{{ $t('introFinishedLabel') }}</span>
        </div>
        <div>{{ studentsNumber }} {{ $t('introFinishedPeople') }}</div>
      </li>
    </ul>
  </div>
</template>

<script>

export default {
  props: ['singleLesson', 'currentLesson'],
  name: 'LessonIntro',
  data () {
    return {
      lesson: this.singleLesson,
      studentsNumber: null
    }
  },
  created: function () {
    const ID = this.currentLesson

    const url = `https://cursos.saibamais.org.br/wp-json/saibamais/v2/lesson/${ID}/students`

    this.$http.get(url).then(response => {
      this.$set(this, 'studentsNumber', response.body.students)
    }, response => {
      this.$set(this, 'studentsNumber', 'N/A')
      console.error('Esta informação não pode ser acessada. Consulte o administrador do sistema para maiores informações.')
    })
  }
}
</script>
